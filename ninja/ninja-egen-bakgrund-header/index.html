<p>&lt;img src="&#47;wp-content&#47;uploads&#47;2013&#47;02&#47;ninja-bakgrund-header.png" alt="" width="695" height="182" class="alignnone size-full wp-image-3645" &#47;&gt;</p>
<h1>Dynamisk bakgrund &amp; header&lt;&#47;h1&gt;<br />
Nu n&auml;r CSSen och mallarna &auml;r klara, hade vi t&auml;nkt g&aring; igenom hur man g&ouml;r temat n&aring;got mer dynamiskt. 
<h2>Dynamisk bakgrund&lt;&#47;h2&gt;<br />
En dynamisk bakgrund l&aring;ter anv&auml;ndaren att s&auml;tta deras egen bakgrunds-bild, eller bakgrundsf&auml;rg. F&ouml;r att aktivera det l&auml;gger vi till n&aring;gra rader kod i functions.php.<br />
&Ouml;ppna filen <strong>functions.php&lt;&#47;strong&gt; och l&auml;gg till f&ouml;ljande kod i slutet av filen:
<p>[php]<br />
&#47;**<br />
 * Dynamisk bakgrund<br />
 *<br />
 *<br />
 *&#47;<br />
function ninja_register_custom_background() {<br />
    $args = array(<br />
        'default-color' =&gt; 'e9e0d1',<br />
    );</p>
<p>    $args = apply_filters( 'ninja_custom_background_args', $args );</p>
<p>    if ( function_exists( 'wp_get_theme' ) ) {<br />
        add_theme_support( 'custom-background', $args );<br />
    } else {<br />
        define( 'BACKGROUND_COLOR', $args['default-color'] );<br />
        define( 'BACKGROUND_IMAGE', $args['default-image'] );<br />
        add_custom_background();<br />
    }<br />
}<br />
add_action( 'after_setup_theme', 'ninja_register_custom_background' );<br />
[&#47;php]</p>
<h2>Dynamisk header&lt;&#47;h2&gt;<br />
Nu &auml;r det dags att g&aring; igenom hur man g&ouml;r en dynamisk header, som l&aring;ter anv&auml;ndaren att ladda upp en bild som bakgrund och liknande.
<p>Skapa filen <strong>inc&#47;custom-header.php&lt;&#47;strong&gt; och kopiera in f&ouml;ljande kod:
<p>[php]<br />
<?php<br />
&#47;**<br />
 * Dynamisk header<br />
 *<br />
 * Du kan &auml;ven l&auml;gga till en egen bakgrundsbild i header.php s&aring;h&auml;r:</p>
<p>    <?php $header_image = get_header_image();<br />
    if ( ! empty( $header_image ) ) { ?><br />
        <a href="&lt;?php echo esc_url( home_url( '&#47;' ) ); ?&gt;" title="&lt;?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?&gt;" rel="home"><br />
            &lt;img src="<?php header_image(); ?>" width="<?php echo get_custom_header()->width; ?>" height="<?php echo get_custom_header()->height; ?>" alt="" &#47;&gt;<br />
        &lt;&#47;a&gt;<br />
    <?php } &#47;&#47; if ( ! empty( $header_image ) ) ?>
<p> *<br />
 * @package Ninja<br />
 * @since Ninja 1.0<br />
 *&#47;</p>
<p>&#47;**<br />
 * Dynamisk header<br />
 *<br />
 * @uses ninja_header_style()<br />
 * @uses ninja_admin_header_style()<br />
 * @uses ninja_admin_header_image()<br />
 *<br />
 * @package Ninja<br />
 *&#47;<br />
function ninja_custom_header_setup() {<br />
    $args = array(<br />
        'default-image'          =&gt; '',<br />
        'default-text-color'     =&gt; 'e9e0e1',<br />
        'width'                  =&gt; 1050,<br />
        'height'                 =&gt; 250,<br />
        'flex-height'            =&gt; true,<br />
        'wp-head-callback'       =&gt; 'ninja_header_style',<br />
        'admin-head-callback'    =&gt; 'ninja_admin_header_style',<br />
        'admin-preview-callback' =&gt; 'ninja_admin_header_image',<br />
    );</p>
<p>    $args = apply_filters( 'ninja_custom_header_args', $args );</p>
<p>    if ( function_exists( 'wp_get_theme' ) ) {<br />
        add_theme_support( 'custom-header', $args );<br />
    } else {<br />
        &#47;&#47; Compat: Versions of WordPress prior to 3.4.<br />
        define( 'HEADER_TEXTCOLOR',    $args['default-text-color'] );<br />
        define( 'HEADER_IMAGE',        $args['default-image'] );<br />
        define( 'HEADER_IMAGE_WIDTH',  $args['width'] );<br />
        define( 'HEADER_IMAGE_HEIGHT', $args['height'] );<br />
        add_custom_image_header( $args['wp-head-callback'], $args['admin-head-callback'], $args['admin-preview-callback'] );<br />
    }<br />
}<br />
add_action( 'after_setup_theme', 'ninja_custom_header_setup' );</p>
<p>&#47;**<br />
 * Bakgrundskompabilitet f&ouml;r get_custom_header()<br />
 * @package Ninja<br />
 * @since Ninja 1.0<br />
 *&#47;</p>
<p>if ( ! function_exists( 'get_custom_header' ) ) {<br />
    function get_custom_header() {<br />
        return (object) array(<br />
            'url'           =&gt; get_header_image(),<br />
            'thumbnail_url' =&gt; get_header_image(),<br />
            'width'         =&gt; HEADER_IMAGE_WIDTH,<br />
            'height'        =&gt; HEADER_IMAGE_HEIGHT,<br />
        );<br />
    }<br />
}</p>
<p>if ( ! function_exists( 'ninja_header_style' ) ) :<br />
&#47;**<br />
 * Stylar header-bilden och texten som visas p&aring; bloggen.<br />
 *<br />
 * @see ninja_custom_header_setup().<br />
 *<br />
 * @since Ninja 1.0<br />
 *&#47;<br />
function ninja_header_style() {</p>
<p>    &#47;&#47; If no custom options for text are set, let's bail<br />
    &#47;&#47; get_header_textcolor() options: HEADER_TEXTCOLOR is default, hide text (returns 'blank') or any hex value<br />
    if ( HEADER_TEXTCOLOR == get_header_textcolor() &amp;&amp; '' == get_header_image() )<br />
        return;<br />
    &#47;&#47; If we get this far, we have custom styles. Let's do this.<br />
    ?&gt;</p>
<style type="text&#47;css">
    <?php<br />
        &#47;&#47; Do we have a custom header image?<br />
        if ( '' != get_header_image() ) :<br />
    ?><br />
        .site-header img {<br />
            display: block;<br />
            margin: 1.5em auto 0;<br />
        }<br />
    <?php endif;</p>
<p>        &#47;&#47; Has the text been hidden?<br />
        if ( 'blank' == get_header_textcolor() ) :<br />
    ?><br />
        .site-title,<br />
        .site-description {<br />
            position: absolute !important;<br />
            clip: rect(1px 1px 1px 1px); &#47;* IE6, IE7 *&#47;<br />
            clip: rect(1px, 1px, 1px, 1px);<br />
        }<br />
        .site-header hgroup {<br />
            background: none;<br />
            padding: 0;<br />
        }<br />
    <?php<br />
        &#47;&#47; If the user has set a custom color for the text use that<br />
        else :<br />
    ?><br />
        .site-title a,<br />
        .site-description {<br />
            color: #<?php echo get_header_textcolor(); ?> !important;<br />
        }<br />
    <?php endif; ?><br />
    <&#47;style><br />
    <?php<br />
}<br />
endif; &#47;&#47; ninja_header_style</p>
<p>if ( ! function_exists( 'ninja_admin_header_style' ) ) :<br />
&#47;**<br />
 * Stylar header-bilden<br />
 *<br />
 * @see ninja_custom_header_setup().<br />
 *<br />
 * @since Ninja 1.0<br />
 *&#47;<br />
function ninja_admin_header_style() {<br />
?></p>
<style type="text&#47;css">
    .appearance_page_custom-header #headimg { &#47;* This is the container for the Custom Header preview. *&#47;<br />
        background: #33605a;<br />
        border: none;<br />
        min-height: 0 !important<br />
    }<br />
    #headimg h1 { &#47;* This is the site title displayed in the preview *&#47;<br />
        font-size: 45px;<br />
        font-family: Georgia, 'Times New Roman', serif;<br />
        font-style: italic;<br />
        font-weight: normal;<br />
        padding: 0.8em 0.5em 0;<br />
    }<br />
    #desc { &#47;* This is the site description (tagline) displayed in the preview *&#47;<br />
        padding: 0 2em 2em;<br />
    }<br />
    #headimg h1 a,<br />
    #desc {<br />
        color: #e9e0d1;<br />
        text-decoration: none;<br />
    }<br />
    <&#47;style><br />
<?php<br />
}<br />
endif; &#47;&#47; ninja_admin_header_style</p>
<p>if ( ! function_exists( 'ninja_admin_header_image' ) ) :<br />
&#47;**<br />
 * Dynamisk header-markup<br />
 *<br />
 * @see ninja_custom_header_setup().<br />
 *<br />
 * @since Ninja 1.0<br />
 *&#47;<br />
function ninja_admin_header_image() { ?></p>
<div id="headimg">
        <?php<br />
        if ( 'blank' == get_header_textcolor() || '' == get_header_textcolor() )<br />
            $style = ' style="display:none;"';<br />
        else<br />
            $style = ' style="color:#' . get_header_textcolor() . ';"';<br />
        ?></p>
<h1><a id="name"<?php echo $style; ?> onclick="return false;" href="<?php echo esc_url( home_url( '&#47;' ) ); ?>"><?php bloginfo( 'name' ); ?><&#47;a><&#47;h1></p>
<div id="desc"<?php echo $style; ?>><?php bloginfo( 'description' ); ?><&#47;div><br />
        <?php $header_image = get_header_image();<br />
        if ( ! empty( $header_image ) ) : ?><br />
            <img src="<?php echo esc_url( $header_image ); ?>" alt="" &#47;><br />
        <?php endif; ?><br />
    <&#47;div><br />
<?php }<br />
endif; &#47;&#47; ninja_admin_header_image<br />
[&#47;php]</p>
<p>L&auml;gg till f&ouml;ljande kod i <strong>functions.php<&#47;strong>:<br />
[php]<br />
&#47;**<br />
 * L&auml;gg till custom-header<br />
 *&#47;<br />
require( get_template_directory() . '&#47;inc&#47;custom-header.php' );<br />
[&#47;php]</p>
<p>&Ouml;ppna filen <strong>header.php<&#47;strong> och kopiera in det som f&ouml;ljer, precis innan <em><br />
<nav><&#47;em> taggen.</p>
<p>[php]<br />
<?php $header_image = get_header_image();<br />
        if ( ! empty( $header_image ) ) { ?><br />
            <a href="<?php echo esc_url( home_url( '&#47;' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home"><br />
                <img src="<?php header_image(); ?>" width="<?php echo get_custom_header()->width; ?>" height="<?php echo get_custom_header()->height; ?>" alt="" &#47;><br />
            <&#47;a><br />
<?php } &#47;&#47; if ( ! empty( $header_image ) )<br />
?><br />
[&#47;php]</p>
</style></a></p></strong></p></h2></strong></h2></h1>
